(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,a){e.exports=a(59)},30:function(e,t,a){},32:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),c=a(23),l=a.n(c),i=(a(30),a(6)),r=a(7),o=a(9),m=a(8),d=a(10),u=a(1),h=(a(32),a(24)),p=a.n(h),b=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state=Object.assign({readMore:!1,activeStep:0,accountSID:"",authToken:"",fromPhone:"",credValid:!1,loading:!1,ownPhone:"",comrades:[],message:""},JSON.parse(window.localStorage.txtrLS)),a.step=a.step.bind(Object(u.a)(Object(u.a)(a))),a.toggleReadMore=a.toggleReadMore.bind(Object(u.a)(Object(u.a)(a))),a.haveCred=a.haveCred.bind(Object(u.a)(Object(u.a)(a))),a.validate=a.validate.bind(Object(u.a)(Object(u.a)(a))),a.backup=a.backup.bind(Object(u.a)(Object(u.a)(a))),a.sendTest=a.sendTest.bind(Object(u.a)(Object(u.a)(a))),a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"backup",value:function(){window.localStorage.txtrLS=JSON.stringify(this.state)}},{key:"step",value:function(e){var t=this,a=this.state.activeStep;a+=e?-1:1,this.setState({activeStep:a},function(){return t.backup()})}},{key:"toggleReadMore",value:function(){this.setState({readMore:!this.state.readMore})}},{key:"haveCred",value:function(){var e=this.state,t=e.accountSID,a=e.authToken,n=e.fromPhone;return""!==t&&""!==a&&""!==n}},{key:"validate",value:function(){var e=this;if(this.haveCred()&&!this.credValid){this.setState({loading:!0});var t=this.state,a=t.accountSID+":"+t.authToken;window.fetch("https://messaging.twilio.com/v1/Services",{headers:{Authorization:"Basic "+btoa(a)}}).then(function(e){return e.json()}).then(function(t){e.setState({loading:!1,credValid:!t.code})}).catch(function(t){e.setState({loading:!1}),console.error(t)})}}},{key:"sendTest",value:function(){var e="Sending Txtr Test: "+new Date;S(this.state.accountSID,this.state.authToken,this.state.fromPhone,e,this.state.ownPhone,function(e){e&&setTimeout(function(){alert("Error "+e.message)})})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"container mt-5"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-12"},s.a.createElement("h1",null,"Txtr",s.a.createElement("span",{style:{fontSize:".4em",color:"#ccc"}},"Sending Txts to everyone around")),s.a.createElement("h3",null,"How to use it"),s.a.createElement("p",{className:this.state.readMore?"":"collapse"},"First, get a Twilio Acct. Get three pieces of information from there: SID, Token, and the phone number you bought there for a dollar. Type those in at step 1."),s.a.createElement("p",{className:this.state.readMore?"":"collapse"},"Proceed to step two, where you can enter a delimiter separated list of phone numbers (format ",s.a.createElement("code",null,"+1XXXYYYZZZZ")," of course). See a preview of the recognized numbers on this screen as well."),s.a.createElement("p",{className:this.state.readMore?"":"collapse"},"Next proceed to step three, and hit send, noting send successes (and failures)."),s.a.createElement("p",{className:this.state.readMore?"":"collapse"},"On step four, share in the fruits of organizing for the collective liberation of the working classes."),s.a.createElement("p",{className:this.state.readMore?"":"collapse"},"When you switch steps, your entered information is saved locally so that when you refresh the page it's still there."),s.a.createElement("button",{tabIndex:-1,type:"button",className:"btn btn-link",onClick:function(e){e.preventDefault(),this.toggleReadMore()}.bind(this)},"Read"," ",this.state.readMore?"less":"more","..."))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-12"},s.a.createElement(p.a,{steps:[{title:"Credentials",onClick:function(t){t.preventDefault(),e.setState({activeStep:0})}},{title:"Comrades",onClick:function(t){t.preventDefault(),e.setState({activeStep:1})}},{title:"Communications",onClick:function(t){t.preventDefault(),e.setState({activeStep:2})}},{title:"Communism",onClick:function(t){t.preventDefault(),e.setState({activeStep:3})}}],activeStep:this.state.activeStep}),s.a.createElement("div",{id:"cred",className:0===this.state.activeStep?"":"collapse"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-4"},s.a.createElement("input",{type:"text",className:"form-control",onChange:function(t){e.setState({accountSID:t.target.value,credValid:!1})},value:this.state.accountSID}),s.a.createElement("small",{className:"text-muted"},"Enter your Account SID here.")),s.a.createElement("div",{className:"col-md-4"},s.a.createElement("input",{type:"password",className:"form-control",onChange:function(t){e.setState({authToken:t.target.value,credValid:!1})},value:this.state.authToken}),s.a.createElement("small",{className:"text-muted"},"Enter your Auth Token here.")),s.a.createElement("div",{className:"col-md-4"},s.a.createElement("input",{type:"text",className:"form-control",onChange:function(t){e.setState({fromPhone:t.target.value,credValid:!1})},value:this.state.fromPhone}),s.a.createElement("small",{className:"text-muted"},"Enter your ",s.a.createElement("code",null,"From:")," phone number here."))),s.a.createElement("div",{className:"m-3"},s.a.createElement("button",{type:"button",className:"btn btn-outline-warning btn-sm",onClick:this.validate,disabled:!this.haveCred()||this.state.loading||this.state.credValid},"Validate",this.state.credValid?"d":null),s.a.createElement("span",{className:"ml-3"},this.state.loading?"Loading...":null,this.state.credValid?"Validated!":"Invalid.")),s.a.createElement("input",{type:"text",className:"form-control",onChange:function(t){e.setState({ownPhone:t.target.value})},value:this.state.ownPhone}),s.a.createElement("small",{className:"text-muted"},"Optionally, enter your own phone number here to send yourself a test message."),s.a.createElement("div",{className:"m-3"},s.a.createElement("button",{type:"button",className:"btn btn-outline-warning btn-sm",onClick:this.sendTest,disabled:!this.state.credValid},"Send"))),s.a.createElement("div",{id:"comr",className:1===this.state.activeStep?"":"collapse"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-6"},s.a.createElement(E,{submit:function(t){return e.setState({comrades:t})}})),s.a.createElement("div",{className:"col-md-6"},s.a.createElement("p",null,"Preview phone number list:"),s.a.createElement("p",null,"Valid (",s.a.createElement("code",null,"^\\+1[\\d]{10}$"),"):"),s.a.createElement("ul",null,this.state.comrades.filter(function(e){return/^\+1[\d]{10}$/.test(e)}).map(function(e,t){return s.a.createElement("li",{key:t},e)})),"Invalid:",s.a.createElement("ul",null,this.state.comrades.filter(function(e){return!/^\+1[\d]{10}$/.test(e)}).map(function(e,t){return s.a.createElement("li",{key:t},e)}))))),s.a.createElement("div",{id:"comm",className:2===this.state.activeStep?"":"collapse"},s.a.createElement("div",{className:"m-3"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-3 text-right"},s.a.createElement("p",null,s.a.createElement("small",{className:"text-muted"},"Enter body of mass message:"))),s.a.createElement("div",{className:"col-md-9"},s.a.createElement("textarea",{id:"testing",value:this.state.message,onChange:function(t){return e.setState({message:t.target.value})}})))),s.a.createElement(g,{comrades:this.state.comrades,senderTest:S.bind(null,this.state.accountSID,this.state.authToken,this.state.fromPhone,this.state.message,this.state.ownPhone),senderAny:function(t,a){S(e.state.accountSID,e.state.authToken,e.state.fromPhone,e.state.message,t,a)}})),s.a.createElement("div",{id:"cmnm",className:3===this.state.activeStep?"":"collapse"},s.a.createElement("p",null,"Lorem ipsum amet adipisicing sint sed et enim eiusmod nulla occaecat aliqua anim magna culpa non sunt in do.")),s.a.createElement("div",{style:{float:"right"}},s.a.createElement("button",{onClick:function(){return e.step(1)},type:"button",className:"btn btn-warning",disabled:0===this.state.activeStep},"Back"),s.a.createElement("button",{onClick:function(){return e.step(0)},type:"button",className:"btn btn-success ml-2",disabled:3===this.state.activeStep},"Next")))))}}]),t}(n.Component),v=a(53);function f(e){var t=v(e);return t&&t.length>0?t[0]:e}var E=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={comrades:"",customDelimiter:" ",delimiter:" "},a.click=a.click.bind(Object(u.a)(Object(u.a)(a))),a.labelStyle={width:"25%"},a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"click",value:function(){var e=this.state.comrades.split(this.state.delimiter);this.props.submit(e.map(f))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("div",{className:"m-3"},s.a.createElement("p",null,s.a.createElement("small",{className:"text-muted"},"Paste phone numbers.")),s.a.createElement("textarea",{value:this.state.comrades,onChange:function(t){return e.setState({comrades:t.target.value})}})),s.a.createElement("div",{className:"m-3"},s.a.createElement("p",null,s.a.createElement("small",{className:"text-muted"},"Select delimiter.")),s.a.createElement("label",{className:"c-input c-radio",style:this.labelStyle},s.a.createElement("input",{id:"radio1",name:"radio",type:"radio",checked:" "===this.state.delimiter,onChange:function(){return e.setState({delimiter:" "})}}),s.a.createElement("span",{className:"c-indicator"})," ","Space"),s.a.createElement("label",{className:"c-input c-radio",style:this.labelStyle},s.a.createElement("input",{id:"radio2",name:"radio",type:"radio",checked:"\t"===this.state.delimiter,onChange:function(){return e.setState({delimiter:"\t"})}}),s.a.createElement("span",{className:"c-indicator"})," ","Tab"),s.a.createElement("label",{className:"c-input c-radio",style:this.labelStyle},s.a.createElement("input",{id:"radio3",name:"radio",type:"radio",checked:"\n"===this.state.delimiter,onChange:function(){return e.setState({delimiter:"\n"})}}),s.a.createElement("span",{className:"c-indicator"})," ","Enter"),s.a.createElement("label",{className:"c-input c-radio",style:this.labelStyle},s.a.createElement("input",{id:"radio4",name:"radio",type:"radio",checked:-1===" \t\n".indexOf(this.state.delimiter),onChange:function(){return e.setState({delimiter:e.state.customDelimiter})}}),s.a.createElement("span",{className:"c-indicator"})," ","Custom:"),s.a.createElement("input",{id:"custom-delimiter",type:"text",className:"form-control",onChange:function(t){e.setState({customDelimiter:t.target.value})},value:this.state.customDelimiter}),s.a.createElement("small",{className:"text-muted"},"Specify custom delimiter.")),s.a.createElement("button",{onClick:this.click,type:"button",className:"btn btn-dark btn-sm"},"Preview"))}}]),t}(n.Component),g=function(e){function t(e){var a;return Object(i.a)(this,t),a=Object(o.a)(this,Object(m.a)(t).call(this,e)),console.log(e),a.meatAndPotatoes=a.meatAndPotatoes.bind(Object(u.a)(Object(u.a)(a))),a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"meatAndPotatoes",value:function(){var e=[];(function t(a,n){if(n===a.length)return alert("there were "+e.length+" errors."),void console.log(e);this.props.senderAny(a[n],function(s){s&&e.push(s),t(a,n+1)})}).bind(this)(this.props.comrades,0)}},{key:"render",value:function(){var e=this,t={borderRadius:"100%",display:"inline-block",lineHeight:"200px",width:"210px",margin:"0 auto"};return s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-6 text-center"},s.a.createElement("button",{type:"button",className:"btn btn-light btn-sm",style:Object.assign({background:"#e95"},t),onClick:function(t){return e.props.senderTest(function(e){return alert(e)})}},"Send me a test message")),s.a.createElement("div",{className:"col-md-6 text-center"},s.a.createElement("button",{type:"button",className:"btn btn-light btn-sm",style:Object.assign({background:"#4f3"},t),onClick:function(t){return e.meatAndPotatoes(t)}},"Send mass text message")))}}]),t}(n.Component);function S(e,t,a,n,s,c){console.log(arguments);var l="https://api.twilio.com/2010-04-01/Accounts/".concat(e,"/Messages.json"),i=e+":"+t,r=[],o={From:a,Body:n,To:s};for(var m in o){var d=encodeURIComponent(m),u=encodeURIComponent(o[m]);r.push(d+"="+u)}var h=r.join("&");fetch(l,{method:"post",headers:{Authorization:"Basic "+btoa(i),"Content-Type":"application/x-www-form-urlencoded"},body:h}).then(function(e){return e.json()}).then(function(e){null!==e.error_code&&c(e)}).then(c.bind(null,null)).catch(c)}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(54),a(57);window.localStorage.txtrLS=window.localStorage.txtrLS||"{}",l.a.render(s.a.createElement(b,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[25,2,1]]]);
//# sourceMappingURL=main.c03f5102.chunk.js.map